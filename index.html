<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AllLinguageme – Venteliste</title>
  <style>
    :root { --blue:#003366; --accent:#ff6a3d; --bg:#f6f6f7; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:#222; }
    .wrap { max-width: 760px; margin: 0 auto; padding: 24px; }
    .card { background:#fff; border-radius:16px; box-shadow: 0 10px 25px rgba(0,0,0,.06); padding: 28px; }
    h1 { margin:0 0 8px; font-size: 28px; }
    p.lead { margin:0 0 20px; color:#444; }
    label { display:block; margin:14px 0 6px; font-weight:600; }
    input { width:100%; padding:12px 14px; border:1px solid #ddd; border-radius:12px; font-size:16px; }
    .row { display:grid; gap:12px; grid-template-columns:1fr; }
    @media (min-width:620px){ .row{ grid-template-columns:1fr 1fr; } }
    .btn { display:inline-block; padding:12px 18px; border-radius:12px; border:none; cursor:pointer; font-weight:700; }
    .btn.primary { background:var(--accent); color:#fff; }
    .note { margin-top:12px; font-size:14px; color:#666; }
    .ok { color:#0a7a28; font-weight:600; }
    .err { color:#b00020; font-weight:600; }
    .topbar { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
    .lang { display:flex; gap:8px; }
    .chip { border:1px solid #ddd; padding:6px 10px; border-radius:999px; background:#fff; font-size:13px; cursor:pointer; }
    .chip.active { border-color: var(--blue); color:var(--blue); font-weight:700; }
    a.admin { font-size:13px; color:var(--blue); text-decoration:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="lang">
        <button class="chip active" id="lang-no">Norsk</button>
        <button class="chip" id="lang-en">English</button>
      </div>
      <a class="admin" href="admin.html">Admin</a>
    </div>

    <div class="card">
      <h1 id="t-title">Bli med på ventelista</h1>
      <p class="lead" id="t-lead">Legg igjen **navn og e-post**, så sier vi fra når AllLinguageme er klar.</p>

      <div class="row">
        <div>
          <label for="name" id="t-name-label">Navn</label>
          <input id="name" type="text" placeholder="Fornavn og etternavn" autocomplete="name" />
        </div>
        <div>
          <label for="email" id="t-email-label">E-post</label>
          <input id="email" type="email" placeholder="navn@domene.no" autocomplete="email" />
        </div>
      </div>

      <div style="margin-top:18px;">
        <button class="btn primary" id="joinBtn">Meld meg på</button>
        <div class="note" id="msg"></div>
      </div>
    </div>
  </div>

  <script>
    // --- Språk-tekster (NO/EN) ---
    const UI = {
      no: {
        title: "Bli med på ventelista",
        lead: "Legg igjen **navn og e-post**, så sier vi fra når AllLinguageme er klar.",
        name: "Navn",
        email: "E-post",
        join: "Meld meg på",
        ok: "Takk! Du står nå på ventelista.",
        err: "Skriv inn gyldig navn og e-post.",
      },
      en: {
        title: "Join the waitlist",
        lead: "Leave your **name and email**, and we’ll notify you when AllLinguageme is ready.",
        name: "Name",
        email: "Email",
        join: "Join waitlist",
        ok: "Thanks! You’re on the waitlist.",
        err: "Please enter a valid name and email.",
      }
    };

    const el = (id) => document.getElementById(id);
    const msg = el("msg");
    const nameInput = el("name");
    const emailInput = el("email");
    const STORAGE_KEY = "allinguageme_waitlist";
    let currentLang = "no";

    function setLang(lang){
      currentLang = lang;
      const t = UI[lang];
      document.getElementById("t-title").textContent = t.title;
      document.getElementById("t-lead").textContent = t.lead.replace("**","").replace("**","");
      document.getElementById("t-name-label").textContent = t.name;
      document.getElementById("t-email-label").textContent = t.email;
      document.getElementById("joinBtn").textContent = t.join;
      document.getElementById("lang-no").classList.toggle("active", lang==="no");
      document.getElementById("lang-en").classList.toggle("active", lang==="en");
    }

    document.getElementById("lang-no").onclick = () => setLang("no");
    document.getElementById("lang-en").onclick = () => setLang("en");
    setLang("no");

    function loadList(){
      try { return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]"); }
      catch { return []; }
    }
    function saveList(list){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(list));
    }
    function validEmail(v){
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);
    }

    document.getElementById("joinBtn").addEventListener("click", () => {
      const name = nameInput.value.trim();
      const email = emailInput.value.trim().toLowerCase();

      if (!name || !validEmail(email)) {
        msg.textContent = UI[currentLang].err;
        msg.className = "note err";
        return;
      }

      const list = loadList();
      // unngå duplikater på e-post
      if (!list.some(x => x.email === email)) {
        list.push({ name, email, ts: new Date().toISOString() });
        saveList(list);
      }
      nameInput.value = "";
      emailInput.value = "";
      msg.textContent = UI[currentLang].ok;
      msg.className = "note ok";
    });
  </script>
</body>
</html>

